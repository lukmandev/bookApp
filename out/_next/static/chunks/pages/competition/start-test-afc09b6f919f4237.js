(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{5905:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/competition/start-test",function(){return n(8178)}])},1819:function(e,t,n){"use strict";n.d(t,{Ru:function(){return p},GS:function(){return f},MP:function(){return m},qL:function(){return h},zQ:function(){return x},p_:function(){return w}});var r=n(8520),i=n.n(r),a=n(5295),o=n(6967),s=n(5198),c=n(546),l=n(2702);function d(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,s,"next",e)}function s(e){d(a,r,i,o,s,"throw",e)}o(void 0)}))}}var p=(0,a.hg)("competition/user/",u(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)((0,s.Be)(!1)),e.prev=2,e.next=5,o.Z.get("/competition/mine/");case 5:a=e.sent.data,r((0,s.N)(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r((0,s.LT)(c.L.ERROR_500));case 12:return e.prev=12,r((0,s.Be)(!0)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))),f=(0,a.hg)("competition/detail/",u(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)((0,s.k2)(!1)),e.prev=2,e.next=5,o.Z.get("/competition/mine/".concat(t));case 5:a=e.sent.data,r((0,s.L4)(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.response?404===e.t0.response.status?r((0,s.mC)(c.T.DETAIL_COMPETITION_ERROR_404)):r((0,s.mC)(c.L.ERROR_500)):(e.t0.request&&e.t0.response,r((0,s.mC)(c.L.ERROR_500)));case 12:return e.prev=12,r((0,s.k2)(!0)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))),m=(0,a.hg)("participation/set/",u(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)((0,l.pz)(!1)),r((0,l.FY)(!1)),r((0,l.mA)(null)),e.prev=4,e.next=7,o.Z.post("/competition/participation/",t);case 7:r((0,l.FY)(!0)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),e.t0.response&&403===e.t0.response.status?r((0,l.mA)(c.T.ALREADY_PARTICIPATED)):r((0,l.mA)(c.L.ERROR_500));case 13:return e.prev=13,r((0,l.pz)(!0)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,10,13,16]])})))),h=(0,a.hg)("participation/update/",u(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)((0,l.oX)(!1)),e.prev=2,e.next=5,o.Z.patch("/competition/participation/",t);case 5:r((0,l.pW)(!0)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r((0,l.tf)(c.L.ERROR_500));case 11:return e.prev=11,r((0,l.oX)(!0)),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})))),x=(0,a.hg)("competition/public/",u(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)((0,s.rQ)(!1)),r((0,s.ET)(null)),r((0,s.sW)([])),e.prev=4,e.next=7,o.Z.get(t);case 7:a=e.sent.data,r((0,s.sW)(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r((0,s.ET)(c.L.ERROR_500));case 14:return e.prev=14,r((0,s.rQ)(!0)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})))),w=(0,a.hg)("competition/search/",u(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.dispatch)((0,s.G2)(!1)),e.prev=2,e.next=5,o.Z.get("/competition/search/?search=".concat(t));case 5:a=e.sent.data,r((0,s.Bz)(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r((0,s.rq)(c.L.ERROR_500));case 12:return e.prev=12,r((0,s.G2)(!0)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])}))))},8178:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var r=n(5893),i=n(5481),a=n(7294),o=n(5617),s=n(9505),c=n(1163),l=n(5282),d=n(7357),u=n(5861),p=n(1057),f=n(7948),m=n(3730),h=n(9874),x=n(6010),w=n(8130),g=n(8697),v=function(e){return e.test},B=(0,g.P1)(v,s.s,(function(e,t){var n=t.detailCompetition.questions,r={correctAnswers:0,wrongAnswers:0,questionsCount:n.length,duration:0};return e.answers.forEach((function(e){r.duration=r.duration+=e.time;var t=n.find((function(t){return t.id===e.question}));if(!t)return r.wrongAnswers=r.wrongAnswers+1;var i=t.variants.find((function(t){return t.id===e.answer}));if(!i)return r.wrongAnswers=r.wrongAnswers+1;i.isCorrect?r.correctAnswers=r.correctAnswers+1:r.wrongAnswers=r.wrongAnswers+1})),r})),j=n(2702);function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var y="340px",Z=(0,m.B)(20,35),E=(0,m.B)(20,24),I=(0,h.Z)((function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",paddingTop:Z,paddingBottom:Z},questionIndex:{fontWeight:"400",fontSize:(0,m.B)(13,15),textTransform:"none",padding:"".concat((0,m.B)(2,3)," ").concat((0,m.B)(7,10))},questionHolder:{maxWidth:y,width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-start",gridRowGap:(0,m.B)(10,15),marginTop:(0,m.B)(15,20),marginBottom:(0,m.B)(15,20)},answerBtn:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",lineHeight:E,wordBreak:"break-word",overflowWrap:"break-word",textAlign:"left",padding:"".concat((0,m.B)(4,6)," ").concat((0,m.B)(12,14)),border:"1px solid ".concat(e.palette.primary.main)},answerBtnTitle:{textTransform:"none",fontWeight:"500",fontSize:"".concat((0,m.B)(13,15),"!important"),color:e.palette.quaternary.main,lineHeight:E,marginRight:(0,m.B)(3,5),"&.selected":{color:"".concat(e.palette.fivefold.main,"!important")}},nextBtn:{maxWidth:y,width:"100%",padding:"".concat((0,m.B)(4,6)," ").concat((0,m.B)(8,10)),fontSize:(0,m.B)(12,13)},timerHolder:{display:"flex",flexDirection:"column",alignItems:"flex-end",maxWidth:(0,m.B)(300,350),width:"100%",padding:"".concat((0,m.B)(10,15)," 0")},indicator:{width:"100%",outline:"1px solid #DC016A",borderRadius:"10px",overflow:"hidden",height:10},indicatorActive:{height:"100%",background:e.palette.primary.main,transition:"0.1s ease"}}})),C=["A","B","C","D","E","F"],R=function(){var e=(0,o.I0)(),t=I(),n=(0,o.v9)(v),i=(0,o.v9)(s.s),c=(0,a.useRef)(null),l=(0,a.useMemo)((function(){return i.detailCompetition.questions[n.currentQuestion]}),[n.currentQuestion]),h=(0,a.useState)(Date.now()+1e3*l.duration),g=h[0],B=h[1];(0,a.useEffect)((function(){B(Date.now()+1e3*l.duration)}),[l]);var y=function(){var t=i.detailCompetition.questions[n.currentQuestion+1];e((0,j.tn)(A(n.answers).concat([{answer:n.selectedAnswer.question!==l.id?null:n.selectedAnswer.answer,question:l.id,time:l.duration-c.current.state.timeDelta.seconds}]))),e(t?(0,j.VM)(n.currentQuestion+1):(0,j.F7)(!0))},Z=(0,a.useCallback)((function(e){var n=e.minutes,i=e.seconds;e.total;return(0,r.jsxs)(d.Z,{className:t.timerHolder,children:[(0,r.jsxs)(u.Z,{fontSize:(0,m.B)(12,14),fontWeight:"400",color:"quaternary",children:[(0,w.Bu)(n),":",(0,w.Bu)(i)]}),(0,r.jsx)(d.Z,{className:t.indicator,children:(0,r.jsx)(d.Z,{className:t.indicatorActive,style:{width:"".concat(100*(60*n+i)/l.duration,"%")}})})]})}),[l]),E=(0,a.useMemo)((function(){return(0,r.jsx)(w.ZP,{ref:c,autoStart:!0,onComplete:y,date:g,renderer:Z},n.currentQuestion)}),[g,n.selectedAnswer]),R=(0,a.useCallback)((function(e){return n.selectedAnswer.answer===e.id}),[n.selectedAnswer]),S=(0,a.useMemo)((function(){return n.selectedAnswer.question!==l.id||null===n.selectedAnswer.answer?null:(0,r.jsx)(p.Z,{onClick:y,variant:"contained",className:t.nextBtn,children:"\u041a\u0438\u0439\u0438\u043d\u043a\u0438"})}),[n.selectedAnswer]);return(0,r.jsxs)(f.Z,{className:t.container,maxWidth:"md",children:[(0,r.jsx)(p.Z,{variant:"contained",className:t.questionIndex,children:"1 \u0441\u0443\u0440\u043e\u043e"}),E,l.helperTitle?(0,r.jsx)(u.Z,{textAlign:"center",fontSize:(0,m.B)(12,14),fontWeight:"400",color:"quaternary",children:l.helperTitle}):null,(0,r.jsx)(u.Z,{textAlign:"center",fontSize:(0,m.B)(14,16),fontWeight:"400",color:"quaternary",children:l.title}),(0,r.jsx)(d.Z,{className:t.questionHolder,children:l.variants.map((function(n,i){return(0,r.jsx)(p.Z,{onClick:function(){return t=n.id,void e((0,j.fM)({answer:t,question:l.id}));var t},className:(0,x.Z)(t.answerBtnTitle,t.answerBtn,{selected:R(n)}),variant:R(n)?"contained":"outlined",startIcon:(0,r.jsx)(u.Z,{className:(0,x.Z)(t.answerBtnTitle,{selected:R(n)}),children:C[i]}),children:n.title},i)}))}),S]})},S=n(6473),N=n(9769),b=n(1819),T=n(6201),k=n(4373),q=n(3410),W=(0,m.B)(50,68),_=(0,m.B)(20,30),z=(0,m.B)(20,25),D=(0,m.B)(10,15),L=(0,m.B)(18,22),P=(0,h.Z)((function(e){return{container:{paddingTop:_,paddingBottom:_,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},profile:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},avatar:{width:W,height:W,borderRadius:"50%",border:"1px solid ".concat(e.palette.primary.main),overflow:"hidden"},title:{marginTop:D},avatarImg:{width:"100%",height:"100%",objectFit:"cover"},sliderHolder:{maxWidth:(0,m.B)(340,370),width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",gridRowGap:(0,m.B)(10,15),paddingTop:z,paddingBottom:z},sliderItem:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start"},sliderTextHolder:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},slider:{"& .MuiSlider-thumb":{height:L,width:L,border:"2px solid #fff",boxShadow:"0px 4px 10px 0px #028FA36E"},"& .MuiSlider-rail":{height:7,borderRadius:10,border:"1px solid ".concat(e.palette.primary.main),background:"#028FA30D"},"& .MuiSlider-track":{height:7}},finishTestBtn:{textTransform:"none",fontSize:(0,m.B)(11,13),fontWeight:"600",padding:"".concat((0,m.B)(3,6)," ").concat((0,m.B)(30,50))}}})),M=function(){var e=(0,c.useRouter)(),t=P(),i=(0,o.v9)(k.H),a=(0,o.v9)(q.xU),s=B(a);return(0,r.jsxs)(f.Z,{maxWidth:"md",className:t.container,children:[(0,r.jsxs)(d.Z,{className:t.profile,children:[(0,r.jsx)(d.Z,{className:t.avatar,children:(0,r.jsx)("img",{className:t.avatarImg,src:i.profile.competitionProfile.avatar?i.profile.competitionProfile.avatar:n(7626)})}),(0,r.jsx)(u.Z,{fontSize:(0,m.B)(12,14),fontWeight:"500",color:"primary",children:i.profile.competitionProfile.fullname})]}),(0,r.jsx)(u.Z,{className:t.title,textAlign:"center",fontSize:(0,m.B)(14,16),fontWeight:"500",maxWidth:170,children:"\u0421\u0438\u0437 \u0442\u0435\u0441\u0442\u0442\u0438 \u0438\u0439\u0433\u0438\u043b\u0438\u043a\u0442\u04af\u04af \u0431\u04af\u0442\u0442\u04af\u04a3\u04af\u0437!"}),(0,r.jsxs)(d.Z,{className:t.sliderHolder,children:[(0,r.jsxs)(d.Z,{className:t.sliderItem,children:[(0,r.jsxs)(d.Z,{className:t.sliderTextHolder,children:[(0,r.jsx)(u.Z,{fontSize:(0,m.B)(13,15),fontWeight:"500",color:"primary",children:"\u0422\u0443\u0443\u0440\u0430\u0441\u044b"}),(0,r.jsx)(u.Z,{fontSize:(0,m.B)(13,15),fontWeight:"500",color:"quaternary",children:s.correctAnswers})]}),(0,r.jsx)(T.ZP,{className:t.slider,value:s.correctAnswers,"aria-readonly":!0,min:0,max:s.questionsCount})]}),(0,r.jsxs)(d.Z,{className:t.sliderItem,children:[(0,r.jsxs)(d.Z,{className:t.sliderTextHolder,children:[(0,r.jsx)(u.Z,{fontSize:(0,m.B)(13,15),fontWeight:"500",color:"primary",children:"\u041a\u0430\u0442\u0430\u0441\u044b"}),(0,r.jsx)(u.Z,{fontSize:(0,m.B)(13,15),fontWeight:"500",color:"quaternary",children:s.wrongAnswers})]}),(0,r.jsx)(T.ZP,{className:t.slider,value:s.wrongAnswers,"aria-readonly":!0,min:0,max:s.questionsCount})]})]}),(0,r.jsx)(p.Z,{onClick:function(){e.push(l.UI[l.Su.INDEX])},variant:"contained",className:t.finishTestBtn,children:"\u0422\u0435\u0441\u0442\u0442\u0438 \u0431\u0443\u0442\u0443\u0440\u0443\u0443"})]})},O=function(){var e=(0,o.I0)(),t=(0,o.v9)(q.xU),n=(0,o.v9)(v),i=(0,o.v9)(s.s),p=(0,c.useRouter)();if((0,a.useEffect)((function(){return i.detailCompetitionLoaded?(i.detailCompetitionError&&p.push(l.UI[l.Su.INDEX]),i.detailCompetition&&i.detailCompetition.participation&&p.push(l.UI[l.Su.INDEX]),i.detailCompetition&&!i.detailCompetition.participation&&e((0,b.MP)({competition:i.detailCompetition.id}))):p.push(l.UI[l.Su.INDEX]),function(){e((0,j.mX)(!1)),e((0,j.F7)(!1)),e((0,j.VM)(null)),e((0,j.FY)(!1)),e((0,j.mA)(null)),e((0,j.pz)(!1)),e((0,j.tn)([])),e((0,j.fM)({answer:null,question:null})),e((0,j.tf)(null)),e((0,j.pW)(!1)),e((0,j.oX)(!1))}}),[]),(0,a.useEffect)((function(){n.participationInfoLoaded?(e((0,S.K4)(!1)),n.participationIsSuccess&&(e((0,j.VM)(0)),e((0,j.mX)(!0)))):e((0,S.K4)(!0))}),[n.participationInfoLoaded]),(0,a.useEffect)((function(){n.testEnded&&(n.participationUpdateInfoLoaded?e((0,S.K4)(!1)):e((0,S.K4)(!0)))}),[n.participationUpdateInfoLoaded,n.testEnded]),(0,a.useEffect)((function(){if(n.testEnded){var r=B(t);e((0,b.qL)({competition:i.detailCompetition.id,isDone:!0,duration:r.duration,correctAnswers:r.correctAnswers,wrongAnswers:r.wrongAnswers}))}}),[n.testEnded]),!i.detailCompetitionLoaded)return"";if(i.detailCompetitionError)return"";if(i.detailCompetition&&i.detailCompetition.participation)return"";return(0,r.jsx)(r.Fragment,{children:n.participationInfoLoaded?n.participationError?(0,r.jsxs)(d.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"".concat((0,m.B)(20,30)," ").concat((0,m.B)(10,15))},children:[(0,r.jsx)(N.Z,{sx:{fontSize:(0,m.B)(55,70),color:"primary.main"}}),(0,r.jsx)(u.Z,{sx:{mt:(0,m.B)(4,6)},textAlign:"center",fontWeight:"400",fontSize:(0,m.B)(20,25),color:"quaternary",children:n.participationError})]}):n.participationIsSuccess&&n.testStarted&&!n.testEnded?(0,r.jsx)(R,{}):n.participationIsSuccess&&n.testEnded?n.participationUpdateInfoLoaded?n.participationUpdateError?(0,r.jsxs)(d.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"".concat((0,m.B)(20,30)," ").concat((0,m.B)(10,15))},children:[(0,r.jsx)(N.Z,{sx:{fontSize:(0,m.B)(55,70),color:"primary.main"}}),(0,r.jsx)(u.Z,{sx:{mt:(0,m.B)(4,6)},textAlign:"center",fontWeight:"400",fontSize:(0,m.B)(20,25),color:"quaternary",children:n.participationUpdateError})]}):(0,r.jsx)(M,{}):"":void 0:""})},H=function(){return(0,r.jsx)(i.Z,{Child:O})}},9505:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var r=function(e){return e.competition}}},function(e){e.O(0,[562,129,481,774,888,179],(function(){return t=5905,e(e.s=t);var t}));var t=e.O();_N_E=t}]);